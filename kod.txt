





/*////////////////////////////////////////
* Nazwa pliku: konwersja_formul.hpp
* Projekt:     MSL - Ekspansja
* Autor:       Dominik Majak
*/////////////////////////////////////////


#ifndef KONWERSJA_FORMUL_HPP
#define KONWERSJA_FORMUL_HPP


#include "kostka.hpp"
#include <vector>
#include <string>


class KonwersjaFormul
{
public:
    static std::string konwertuj_na_formule(const Kostka& kostka, const std::vector<std::string>& nazwy_wejsc);
};


#endif





/*////////////////////////////////////////
* Nazwa pliku: konwersja_formul.cpp
* Projekt:     MSL - Ekspansja
* Autor:       Dominik Majak
*/////////////////////////////////////////


#include "konwersja_formul.hpp"


std::string KonwersjaFormul::konwertuj_na_formule(const Kostka& kostka, const std::vector<std::string>& nazwy_wejsc)
{
    std::string formula;
    for (size_t i = 0; i < kostka.rozmiar(); ++i)
    {
        if (kostka[i] == '0') {
            formula += "~" + nazwy_wejsc[i] + " * ";
        } else if (kostka[i] == '1') {
            formula += nazwy_wejsc[i] + " * ";
        }
    }
    if (!formula.empty()) {
        formula = formula.substr(0, formula.size() - 3);
    }
    return formula;
}





/*////////////////////////////////////////
* Nazwa pliku: operacje_na_kostkach.hpp
* Projekt:     MSL - Ekspansja
* Autor:       Dominik Majak
*/////////////////////////////////////////


#ifndef OPERACJE_NA_KOSTKACH_HPP
#define OPERACJE_NA_KOSTKACH_HPP


#include "kostka.hpp"


// klasa pomocnicza do operacji logicznych na kostkach
class OperacjeNaKostkach
{
public:
    static bool czy_kostki_roznia_sie_o_jeden_bit(const Kostka& k1, const Kostka& k2);
    static Kostka lacz_kostki(const Kostka& k1, const Kostka& k2);
    static int liczba_jednynek_w_kostce(const Kostka& k);
    static bool czy_kostka_zawiera(const Kostka& wieksza, const Kostka& mniejsza);
    static bool czy_implikant_pokrywa_kostke(const Kostka& P, const Kostka& K);
};


#endif





/*////////////////////////////////////////
* Nazwa pliku: operacje_na_kostkach.cpp
* Projekt:     MSL - Ekspansja
* Autor:       Dominik Majak
*/////////////////////////////////////////


#include "operacje_na_kostkach.hpp"
#include <algorithm>


bool OperacjeNaKostkach::czy_kostki_roznia_sie_o_jeden_bit(const Kostka& k1, const Kostka& k2)
{
    if (k1.rozmiar() != k2.rozmiar()) return false;
    int roznice = 0;
    for (size_t i = 0; i < k1.rozmiar(); ++i)
    {
        if (k1[i] != k2[i])
        {
            if (k1[i] == '-' || k2[i] == '-') return false;
            roznice++;
            if (roznice > 1) return false;
        }
    }
    return roznice == 1;
}


Kostka OperacjeNaKostkach::lacz_kostki(const Kostka& k1, const Kostka& k2)
{
    std::string wynik = k1.pobierz_wartosc();
    for (size_t i = 0; i < k1.rozmiar(); ++i)
    {
        if (k1[i] != k2[i]) wynik[i] = '-';
    }
    return Kostka(wynik);
}


int OperacjeNaKostkach::liczba_jednynek_w_kostce(const Kostka& k)
{
    int licznik = 0;
    for (size_t i = 0; i < k.rozmiar(); ++i)
    {
        if (k[i] == '1') licznik++;
    }
    return licznik;
}


bool OperacjeNaKostkach::czy_kostka_zawiera(const Kostka& wieksza, const Kostka& mniejsza)
{
    if (wieksza.rozmiar() != mniejsza.rozmiar()) return false;
    for (size_t i = 0; i < wieksza.rozmiar(); ++i)
    {
        if (wieksza[i] != '-' && wieksza[i] != mniejsza[i]) return false;
    }
    return true;
}


bool OperacjeNaKostkach::czy_implikant_pokrywa_kostke(const Kostka& P, const Kostka& K)
{
    const std::size_t n = std::min(P.rozmiar(), K.rozmiar());
    for (std::size_t i = 0; i < n; ++i)
    {
        const char p = P[i];
        const char k = K[i];
        if (k == '-') {
            if (p != '-') return false;
        } else {
            if (!(p == '-' || p == k)) return false;
        }
    }
    for (std::size_t i = n; i < P.rozmiar(); ++i) {
        if (P[i] != '-') return false;
    }
    return true;
}